import{$ as J,W,X,Y as K,Z,_ as Y,a as G,aa as Q,b as V,ba as ee,ca as te,da as k,ea as ne,fa as se,ga as re,ha as oe,ia as ie,ja as ae,ka as ue,la as ce,oa as le}from"./chunk-Z3FORMCZ.js";import{Ia as j,g as I,ha as $,ka as F,ma as H,oa as y,rb as z,wa as q}from"./chunk-NV7BKTHG.js";var tt=(()=>{let t=class t{constructor(n){this.http=n,this.accountUrl="https://account.bongocloud.co.tz"}buildHeaders(n){let s=new G({"Content-Type":"application/json"});return n&&(s=s.set("BONGO-TOKEN",n)),s}generateToken(n,s){let o=`${this.accountUrl}/application/token`;return this.http.post(o,{appId:n,appSecret:s},{headers:this.buildHeaders()})}authenticate(n,s){let o=`${this.accountUrl}/application/authenticate`;return this.http.post(o,{redirectTo:n},{headers:this.buildHeaders(s)})}getUserTokenData(n){let s=`${this.accountUrl}/user/token/${n}`;return this.http.get(s,{headers:this.buildHeaders(n)})}getApplicationTokenData(n){let s=`${this.accountUrl}/application/token/${n}`;return this.http.get(s,{headers:this.buildHeaders(n)})}createAccount(n,s,o,i,u){let a=`${this.accountUrl}/user/create`;return this.http.post(a,{firstname:n,lastname:s,email:o,password:i},{headers:this.buildHeaders(u)})}createApplication(n,s,o){let i=`${this.accountUrl}/application/create`;return this.http.post(i,{appId:s,appSecret:o},{headers:this.buildHeaders(n)})}login(n,s){let o=`${this.accountUrl}/user/login`;return this.http.post(o,{email:n,password:s},{headers:this.buildHeaders()})}getAllUsers(n,s){let o=`${this.accountUrl}/user/users/${n}`;return this.http.get(o,{headers:this.buildHeaders(s)})}getUserProfile(n,s){let o=`${this.accountUrl}/user/data/${n}`;return this.http.get(o,{headers:this.buildHeaders(s)})}deleteUser(n,s){let o=`${this.accountUrl}/user/${n}`;return this.http.delete(o,{headers:this.buildHeaders(s)})}updateUserMetadata(n,s,o){let i=`${this.accountUrl}/user/data/${n}`;return this.http.put(i,s,{headers:this.buildHeaders(o)})}logout(n,s){let o=`${this.accountUrl}/user/logout/${n}`;return this.http.post(o,{},{headers:this.buildHeaders(s)})}};t.\u0275fac=function(s){return new(s||t)(H(V))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var me="firebasestorage.googleapis.com",Ee="storageBucket",Ue=2*60*1e3,Ae=10*60*1e3;var d=class e extends K{constructor(t,r,n=0){super(N(t),`Firebase Storage: ${r} (${N(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return N(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},p=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(p||{});function N(e){return"storage/"+e}function Oe(){let e="An unknown error occurred, please check the error payload for server response.";return new d(p.UNKNOWN,e)}function Ie(){return new d(p.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Se(){return new d(p.CANCELED,"User canceled the upload/download.")}function Pe(e){return new d(p.INVALID_URL,"Invalid URL '"+e+"'.")}function Ne(e){return new d(p.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function he(e){return new d(p.INVALID_ARGUMENT,e)}function ge(){return new d(p.APP_DELETED,"The Firebase app was deleted.")}function xe(e){return new d(p.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var f=class e{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=e.makeFromUrl(t,r)}catch{return new e(t,"")}if(n.path==="")return n;throw Ne(t)}static makeFromUrl(t,r){let n=null,s="([A-Za-z0-9.\\-_]+)";function o(h){h.path.charAt(h.path.length-1)==="/"&&(h.path_=h.path_.slice(0,-1))}let i="(/(.*))?$",u=new RegExp("^gs://"+s+i,"i"),a={bucket:1,path:3};function c(h){h.path_=decodeURIComponent(h.path)}let _="v[A-Za-z0-9_]+",g=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",w=new RegExp(`^https?://${g}/${_}/b/${s}/o${m}`,"i"),b={bucket:1,path:3},U=r===me?"(?:storage.googleapis.com|storage.cloud.google.com)":r,l="([^?#]*)",A=new RegExp(`^https?://${U}/${s}/${l}`,"i"),R=[{regex:u,indices:a,postModify:o},{regex:w,indices:b,postModify:c},{regex:A,indices:{bucket:1,path:2},postModify:c}];for(let h=0;h<R.length;h++){let O=R[h],S=O.regex.exec(t);if(S){let ke=S[O.indices.bucket],P=S[O.indices.path];P||(P=""),n=new e(ke,P),O.postModify(n);break}}if(n==null)throw Pe(t);return n}},x=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function Ce(e,t,r){let n=1,s=null,o=null,i=!1,u=0;function a(){return u===2}let c=!1;function _(...l){c||(c=!0,t.apply(null,l))}function g(l){s=setTimeout(()=>{s=null,e(w,a())},l)}function m(){o&&clearTimeout(o)}function w(l,...A){if(c){m();return}if(l){m(),_.call(null,l,...A);return}if(a()||i){m(),_.call(null,l,...A);return}n<64&&(n*=2);let R;u===1?(u=2,R=0):R=(n+Math.random())*1e3,g(R)}let b=!1;function U(l){b||(b=!0,m(),!c&&(s!==null?(l||(u=2),clearTimeout(s),g(0)):l||(u=1)))}return g(0),o=setTimeout(()=>{i=!0,U(!0)},r),U}function ve(e){e(!1)}function De(e){return e!==void 0}function de(e,t,r,n){if(n<t)throw he(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw he(`Invalid value for '${e}'. Expected ${r} or less.`)}function Le(e){let t=encodeURIComponent,r="?";for(let n in e)if(e.hasOwnProperty(n)){let s=t(n)+"="+t(e[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var C=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(C||{});function Be(e,t){let r=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return r||s||o}var v=class{constructor(t,r,n,s,o,i,u,a,c,_,g,m=!0){this.url_=t,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=i,this.callback_=u,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=_,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,b)=>{this.resolve_=w,this.reject_=b,this.start_()})}start_(){let t=(n,s)=>{if(s){n(!1,new T(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let i=u=>{let a=u.loaded,c=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,c)};this.progressCallback_!==null&&o.addUploadProgressListener(i),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(i),this.pendingConnection_=null;let u=o.getErrorCode()===C.NO_ERROR,a=o.getStatus();if(!u||Be(a,this.additionalRetryCodes_)&&this.retry){let _=o.getErrorCode()===C.ABORT;n(!1,new T(!1,null,_));return}let c=this.successCodes_.indexOf(a)!==-1;n(!0,new T(c,o))})},r=(n,s)=>{let o=this.resolve_,i=this.reject_,u=s.connection;if(s.wasSuccessCode)try{let a=this.callback_(u,u.getResponse());De(a)?o(a):o()}catch(a){i(a)}else if(u!==null){let a=Oe();a.serverResponse=u.getErrorText(),this.errorCallback_?i(this.errorCallback_(u,a)):i(a)}else if(s.canceled){let a=this.appDelete_?ge():Se();i(a)}else{let a=Ie();i(a)}};this.canceled_?r(!1,new T(!1,null,!0)):this.backoffId_=Ce(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&ve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},T=class{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}};function Me(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function $e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Fe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function He(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function qe(e,t,r,n,s,o,i=!0){let u=Le(e.urlParams),a=e.url+u,c=Object.assign({},e.headers);return Fe(c,t),Me(c,r),$e(c,o),He(c,n),new v(a,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,i)}function je(e){if(e.length===0)return null;let t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ze(e){let t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}var it=256*1024;var D=class e{constructor(t,r){this._service=t,r instanceof f?this._location=r:this._location=f.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new e(t,r)}get root(){let t=new f(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ze(this._location.path)}get storage(){return this._service}get parent(){let t=je(this._location.path);if(t===null)return null;let r=new f(this._location.bucket,t);return new e(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw xe(t)}};function fe(e,t){let r=t?.[Ee];return r==null?null:f.makeFromBucketSpec(r,e)}function Ge(e,t,r,n={}){e.host=`${t}:${r}`,e._protocol="http";let{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:X(s,e.app.options.projectId))}var L=class{constructor(t,r,n,s,o){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=me,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ue,this._maxUploadRetryTime=Ae,this._requests=new Set,s!=null?this._bucket=f.makeFromBucketSpec(s,this._host):this._bucket=fe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=f.makeFromBucketSpec(this._url,t):this._bucket=fe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){de("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){de("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return I(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let r=yield t.getToken();if(r!==null)return r.accessToken}return null})}_getAppCheckToken(){return I(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new D(this,t)}_makeRequest(t,r,n,s,o=!0){if(this._deleted)return new x(ge());{let i=qe(t,this._appId,n,s,r,this._firebaseVersion,o);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}makeRequestWithTokens(t,r){return I(this,null,function*(){let[n,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,s).getPromise()})}},pe="@firebase/storage",_e="0.12.5";var be="storage";function Re(e=te(),t){e=Z(e);let n=Q(e,be).getImmediate({identifier:t}),s=W("storage");return s&&Te(n,...s),n}function Te(e,t,r,n={}){Ge(e,t,r,n)}function Ve(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new L(r,n,s,t,ee)}function We(){J(new Y(be,Ve,"PUBLIC").setMultipleInstances(!0)),k(pe,_e,""),k(pe,_e,"esm2017")}We();var E=class{constructor(t){return t}},we="storage",B=class{constructor(){return re(we)}};var M=new F("angularfire2.storage-instances");function Xe(e,t){let r=se(we,e,t);return r&&new E(r)}function Ke(e){return(t,r)=>{let n=t.runOutsideAngular(()=>e(r));return new E(n)}}var Ze={provide:B,deps:[[new y,M]]},Ye={provide:E,useFactory:Xe,deps:[[new y,M],ue]};function Nt(e,...t){return k("angularfire",ne.full,"gcs"),q([Ye,Ze,{provide:M,useFactory:Ke(e),multi:!0,deps:[z,j,ie,ce,[new y,le],[new y,oe],...t]}])}var xt=ae(Re,!0);export{tt as a,E as b,Nt as c,xt as d};
